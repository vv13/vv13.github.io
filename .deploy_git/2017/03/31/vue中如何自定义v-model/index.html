<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"><title>vv13</title><link rel="stylesheet" href="/css/vv13.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_438575_w9o3rescwyp919k9.css"><link rel="icon" href="/undefined"></head><body><div id="content-outer"><link rel="stylesheet" href="/css/github-markdown.css"><article class="markdown-body" id="post"><h1 class="article-title">vue中如何自定义v-model</h1><div class="title-info"><time class="post-time" datetime="2017-03-30T17:36:00.000Z">3.31, 2017</time><div class="title-item"><a href="/tags/vue/"><i class="iconfont icon-tag">vue</i></a></div></div><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>在vue的表单中，大家都享受着v-model带来的便利性，有时候也会遇到自定义v-model的场景，其实它是一颗语法糖而已，那我们接下来就来吃糖吧。</p>
<p>基本的v-model用法为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;input v-model=&quot;something&quot;&gt;</div></pre></td></tr></table></figure></p>
<p>其实它是以下用法的简写：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;input :value=&quot;something&quot; @input=&quot;something = $event.target.value&quot; /&gt;</div></pre></td></tr></table></figure></p>
<p>因此，自己封装组件的话，可以这样来定义：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">// demo.vue</div><div class="line">&lt;template lang=&quot;html&quot;&gt;</div><div class="line">  &lt;input :value=&quot;value&quot; @input=&quot;valueChange&quot;&gt;</div><div class="line">&lt;/template&gt;</div><div class="line"></div><div class="line">&lt;script&gt;</div><div class="line">export default &#123;</div><div class="line">  props: [&apos;value&apos;],</div><div class="line">  methods: &#123;</div><div class="line">    valueChange (v) &#123;</div><div class="line">      this.$emit(&apos;input&apos;, v.target.value)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">&lt;/script&gt;</div><div class="line"></div><div class="line">// 引用</div><div class="line">&lt;demo v-model=&quot;something&quot;&gt;&lt;/demo&gt;</div></pre></td></tr></table></figure>
<h2 id="用法示例"><a href="#用法示例" class="headerlink" title="用法示例"></a>用法示例</h2><p>在使用element组件库中，有些组件需要借助拆分v-model自定义命令才能实现需要的功能，如下:</p>
<p><img src="http://i4.buimg.com/567571/4be2a48163ab3278.png" alt=""></p>
<p>我们想要展示的数据格式为：</p>
<p><img src="http://i2.muimg.com/567571/22498a7d7df1a596.png" alt=""></p>
<p>仔细查阅接口文档，并没有我们需要的格式化数据方法，只有一个format =&gt; YYMMDD的类似方法，但是看示例代码它实现了v-model的双向绑定：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;el-time-select</div><div class="line">  v-model=&quot;value1&quot;</div><div class="line">&lt;/el-time-select&gt;</div></pre></td></tr></table></figure></p>
<p>因此，我们可以通过@input事件获取到它的改变值，然后再通过:value展示时添加一个过滤器，将字符串转换以下即可：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;el-time-select</div><div class="line">  :value=&quot;time | convertToRangeTime&quot;</div><div class="line">  @input=&quot;e =&gt; time = e&quot;</div><div class="line">&lt;/el-time-select&gt;</div></pre></td></tr></table></figure>
</article><div id="commenter"></div><link rel="stylesheet" href="/css/dark.css"><script src="/js/gitment.js"></script><script>var gitment = new Gitment({
owner: 'vv13',
repo: 'vv13.github.io',
oauth: {
    client_id: 'fc26f0c5db6ee176856d',
    client_secret: 'adaddc022d70102d2f037f675d0b29a13d5283dd',
},
})
gitment.render('commenter')</script><div id="footer"><div>vv13 &copy; 2017</div><div class="shortcut"><a href="/atom.xml"><i class="iconfont icon-rss" aria-hidden="true"></i></a><a href="https://github.com/vv13"><i class="iconfont icon-github" aria-hidden="true"></i></a></div></div><div class="side-menu"><div class="shortcut" id="goHome"><a href="/"><i class="icon-home iconfont" aria-hidden="true"></i></a></div><div class="shortcut" id="goTop"><i class="icon-yijiantisheng iconfont" aria-hidden="true"></i></div></div></div><script src="/js/vv13.js"></script><div id="container"></div></body></html>