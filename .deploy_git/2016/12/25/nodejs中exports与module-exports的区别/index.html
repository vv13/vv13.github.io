<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"><title>vv13</title><link rel="stylesheet" href="/css/vv13.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_438575_w9o3rescwyp919k9.css"><link rel="icon" href="/undefined"></head><body><div id="content-outer"><link rel="stylesheet" href="/css/github-markdown.css"><article class="markdown-body" id="post"><h1 class="article-title">nodejs中exports与module.exports的区别</h1><div class="title-info"><time class="post-time" datetime="2016-12-25T15:52:57.000Z">12.25, 2016</time><div class="title-item"><a href="/tags/nodejs/"><i class="iconfont icon-tag">nodejs</i></a></div></div><p>在nodejs中常常会使用require()加载模块，为了使得文件模块化，将其的变量与方法提供给别的模块使用，就会使用到exports与module.exports，可是如何区分它们呢？ 在此简单的记录一下。</p>
<h3 id="require-的返回值"><a href="#require-的返回值" class="headerlink" title="require()的返回值"></a>require()的返回值</h3><p>require()返回的是module.exports指向的内容而不是exports的，我们将两个变量分别赋予新的内存地址，以此来进行观察：</p>
<p>test.js:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">module.exports = function()&#123;</div><div class="line">    console.log(&apos;I\&apos;m module.exports&apos;)</div><div class="line">&#125;</div><div class="line">exports = function()&#123;</div><div class="line">    console.log(&apos;I\&apos;m exports&apos;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>通过<code>var a = require(&#39;./test&#39;)()</code>即可看到打印的函数为module.exports，因此可以确定exports是module.exports的一个指针，不清楚指针的具体内容的接着往下看。</p>
<h3 id="exports是module-exports的一个指针"><a href="#exports是module-exports的一个指针" class="headerlink" title="exports是module.exports的一个指针"></a>exports是module.exports的一个指针</h3><p>假设有两个变量，<code>var a={name:&#39;name1}, var b = a;</code>，b指向a的内存区域，如果执行<code>b.name=&#39;name2&#39;</code>，我们通过打印a.name可以看到其值也为name2，这就说明两个变量共同拥有一块内存区域，并且可以共同对区域进行修改。</p>
<p>可如果我们执行<code>a = {}</code>或者<code>b = {}</code>之后，两个变量就各自管理自己的内存空间了，不再有关联，所以在nodejs中两者一共有几种用法：</p>
<ol>
<li>module.exports存在的话，exports或是exports.xxx就会失效，因此此刻两者已经不是管理共同的内存区域。</li>
<li>exports只能通过exports.xxx这种形式进行使用，否则exports={}会指向新的内存区域，不能被require()加载。</li>
<li>exports.xxx与module.exports.xxx等价且可以共同存在。</li>
</ol>
</article><div id="commenter"></div><link rel="stylesheet" href="/css/dark.css"><script src="/js/gitment.js"></script><script>var gitment = new Gitment({
owner: 'vv13',
repo: 'vv13.github.io',
oauth: {
    client_id: 'fc26f0c5db6ee176856d',
    client_secret: 'adaddc022d70102d2f037f675d0b29a13d5283dd',
},
})
gitment.render('commenter')</script><div id="footer"><div>vv13 &copy; 2017</div><div class="shortcut"><a href="/atom.xml"><i class="iconfont icon-rss" aria-hidden="true"></i></a><a href="https://github.com/vv13"><i class="iconfont icon-github" aria-hidden="true"></i></a></div></div><div class="side-menu"><div class="shortcut" id="goHome"><a href="/"><i class="icon-home iconfont" aria-hidden="true"></i></a></div><div class="shortcut" id="goTop"><i class="icon-yijiantisheng iconfont" aria-hidden="true"></i></div></div></div><script src="/js/vv13.js"></script><div id="container"></div></body></html>