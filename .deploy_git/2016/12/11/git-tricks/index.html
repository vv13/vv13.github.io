<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"><title>vv13</title><link rel="stylesheet" href="/css/vv13.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_438575_w9o3rescwyp919k9.css"><link rel="icon" href="/undefined"></head><body><div id="content-outer"><link rel="stylesheet" href="/css/github-markdown.css"><article class="markdown-body" id="post"><h1 class="article-title">git实用命令技巧</h1><div class="title-info"><time class="post-time" datetime="2016-12-11T15:59:21.000Z">12.11, 2016</time><div class="title-item"><a href="/tags/tricks/"><i class="iconfont icon-tag">tricks</i></a></div></div><h2 id="git-pull-–rebase"><a href="#git-pull-–rebase" class="headerlink" title="git pull –rebase"></a>git pull –rebase</h2><p>从分支上拉取最新的代码时，往往会多出一条merge记录，这样有时不是我们所期望的，因为它会让整个提交线图变得难以理解：</p>
<p><img src="/imgs/git实用命令技巧-1.png" alt=""></p>
<p>我们期望的分支图也许时这样的：</p>
<p><img src="/imgs/git实用命令技巧-2.png" alt=""></p>
<p>只需要将git pull -&gt; git pull –rebase。rebase的好处就在于，它会将当前新的提交记录，全部追加到远程提交信息记录之后:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">合并前：</div><div class="line">        D---E master</div><div class="line">      /</div><div class="line">A---B---C---F origin/master</div><div class="line"></div><div class="line">merge合并：</div><div class="line">    D--------E  </div><div class="line">  /           \</div><div class="line">A---B---C---F---G   master, origin/master</div><div class="line"></div><div class="line">rebase合并：</div><div class="line">A---B---C---F---D---E   master, origin/master</div></pre></td></tr></table></figure></p>
<p>如果遇到冲突，请将冲突解决后执行: <code>git rebase --continue</code>。它也有两面性，至于谁好谁坏，慎用就行了。</p>
<h2 id="git-commit-–amend"><a href="#git-commit-–amend" class="headerlink" title="git commit –amend"></a>git commit –amend</h2><p>有时候我们生成commit信息后有点小的改动，并不希望新添加一个commit，而是将其追加到上一次提交内容中，这条命令就是为了做这件事情，它还可以更改之前的提交信息。</p>
<h2 id="获取远程库的更新"><a href="#获取远程库的更新" class="headerlink" title="获取远程库的更新"></a>获取远程库的更新</h2><p>普通的工作流程一般是先folk整个工程到本地，再添加上游分支：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git remote add upstream https://xxx.git</div></pre></td></tr></table></figure></p>
<p>这样一来，我们就可以获取远程的更新到当前分支：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git pull upstream master</div></pre></td></tr></table></figure></p>
<p>若拉取本地不存在的分支，则可以使用这条命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git checkout -b new_branch upstream/new_branch</div></pre></td></tr></table></figure></p>
<h2 id="推送多个远程库"><a href="#推送多个远程库" class="headerlink" title="推送多个远程库"></a>推送多个远程库</h2><p>用法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ vim ~/.git/config</div><div class="line"></div><div class="line">[remote &quot;upstream&quot;]</div><div class="line">        url = git@gitlab.main.com:project.git</div><div class="line">        url = git@github.main.com:project.git</div><div class="line"></div><div class="line">$ git push upstream</div></pre></td></tr></table></figure>
<p>解释：通过编辑config文件，给远程库多添加一个url，那么再执行push操作时，就可以同时push两个库，如上github与gitlab仓库的项目都会更新。</p>
<h2 id="合并多个提交"><a href="#合并多个提交" class="headerlink" title="合并多个提交"></a>合并多个提交</h2><p>有些时候，本地会做多个commit提交，但是在push之前，合并为1个提交会显得更清晰，此时就需要借助<code>git rebase -i HEAD~N</code>了，其中N代表的是最近几次提交，执行后将需要合并的commit从pick改为squash，再重写提交记录即可。</p>
<h2 id="更改提交人"><a href="#更改提交人" class="headerlink" title="更改提交人"></a>更改提交人</h2><p>在有一次和小伙伴协作代码时，由于需要伪造成同一个身份，让代码管理者看commit历史以为是同一个人做的，因此就用到了–author参数，提交的格式为：<code>name&lt;mail&gt;</code>，比如：<code>git commit -m &#39;feat: something&#39; --author=&quot;TJ&lt;mail@gmail.com&gt;&quot;</code>，这是通过git log即可看到作者信息发生了变化。</p>
</article><div id="commenter"></div><link rel="stylesheet" href="/css/dark.css"><script src="/js/gitment.js"></script><script>var gitment = new Gitment({
owner: 'vv13',
repo: 'vv13.github.io',
oauth: {
    client_id: 'fc26f0c5db6ee176856d',
    client_secret: 'adaddc022d70102d2f037f675d0b29a13d5283dd',
},
})
gitment.render('commenter')</script><div id="footer"><div>vv13 &copy; 2017</div><div class="shortcut"><a href="/atom.xml"><i class="iconfont icon-rss" aria-hidden="true"></i></a><a href="https://github.com/vv13"><i class="iconfont icon-github" aria-hidden="true"></i></a></div></div><div class="side-menu"><div class="shortcut" id="goHome"><a href="/"><i class="icon-home iconfont" aria-hidden="true"></i></a></div><div class="shortcut" id="goTop"><i class="icon-yijiantisheng iconfont" aria-hidden="true"></i></div></div></div><script src="/js/vv13.js"></script><div id="container"></div></body></html>